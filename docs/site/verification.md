# Verification Strategy

## Overview
Verification is performed using the **RISC-V Architectural Test Framework (RISCOF)**. This ensures that the core complies with the unprivileged ISA specification.

## Methodology
The verification process involves comparing the signature generated by the Design Under Test (DUT) against the signature generated by a Golden Reference Model (Spike).

### DUT Plugin
The DUT plugin (`compliance/riscof_riscv_cpu.py`) handles:
1.  **Compilation:** Compiles the RTL using Icarus Verilog (`iverilog`).
    *   **Note:** FPGA-specific files (`pynq_z2_top.sv`) are excluded from the simulation build to avoid dependency on missing Xilinx IP.
    *   **Memory Model:** The simulation uses a 4MB memory model (guarded by `ifndef SYNTHESIS`) to accommodate the full compliance test suite.
2.  **Execution:** Runs the compiled simulation (`vvp`).
3.  **Signature Extraction:** The simulation monitors writes to the `tohost` address (`0x80001000`). When triggered, it dumps the memory content (the signature) to `signature.txt`.

### Reference Model
The reference model is **Spike** (the official RISC-V ISA simulator).

## Running Tests
To execute the compliance suite:

```bash
./run_compliance.sh
```

This script:
1.  Sets up the python environment.
2.  Runs `riscof` with the configured `config.ini`.
3.  Generates an HTML report in `riscof_work/report.html`.

## Passing Criteria
A test is considered passed if and only if the signature generated by the DUT matches the signature generated by Spike bit-for-bit.
